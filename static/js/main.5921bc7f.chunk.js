(this.webpackJsonpfriends=this.webpackJsonpfriends||[]).push([[0],{136:function(e,t,a){e.exports=a(295)},293:function(e,t,a){},294:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(41),c=a.n(l),o=a(4),i=a(11);var s=Object(i.b)((function(e){return{loggedIn:e.loggedIn}}))((function(e){var t=e.loggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(o.b,{to:"/",className:"navbar-item has-text-primary"},"FRIENDS APP"),r.a.createElement("div",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(o.c,{to:"/",className:"navbar-item",activeClassName:"navlink-active",exact:!0},"Home"),r.a.createElement(o.c,{to:"/friends",className:"navbar-item",activeClassName:"navlink-active",exact:!0},"Friends")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(o.c,{to:t?"/logout":"/login",className:t?"button is-danger":"button is-primary"},t?"Logout":"Login"))))))))})),m=a(23);var u=function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h1",{className:"title is-3 has-text-primary"},"Home")),r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",{className:"title is-5 has-text-primary"},"What did I use?"),r.a.createElement("ul",null,r.a.createElement("li",null,"React CRUD App"),r.a.createElement("li",null,"Redux for State management"),r.a.createElement("li",null,"Redux Thunk for async state"),r.a.createElement("li",null,"Axios for http calls"),r.a.createElement("li",null,"React Router"),r.a.createElement("li",null,"Formik Forms with Yup Validation"),r.a.createElement("li",null,"Node REST api"),r.a.createElement("li",null,"Bulma CSS Framework"))),r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",{className:"title is-5 has-text-primary"},"Instructions"),r.a.createElement("ol",null,r.a.createElement("li",null,"Add a route for a login page and build out a simple login form with username and password inputs and a submit button (design this however you would like)."),r.a.createElement("li",null,"The login function should save the returned token to localStorage. You can setup isLoading state in your Login component, and show a spinner on your form or in your button while the login request is happening."),r.a.createElement("li",null,"When the request returns, save the token to localStorage, then use the history object in your Login component to navigate your user to your FriendsList route"),r.a.createElement("li",null,"Create a PrivateRoute component to protect your other routes. It should check localStorage for a token, and redirect the user to your login route if there is not a token."),r.a.createElement("li",null,"Create a protected route for your friends list. Remember, if the user isn't logged in, navigating to this protected route will redirect them to the login page."),r.a.createElement("li",null,"In your FriendsList component, rendered with ProtectedRoute, you will create a list of your friends that you get from the API."),r.a.createElement("li",null,"Adding New Friends"),r.a.createElement("li",null,'In the requirements for this project, we implemented a login POST operation, a GET operation, and a "add friend" POST operation. Add two more functions, one for making a PUT request, and the other for making a DELETE request.'),r.a.createElement("li",null,"Style the friends list and the input field and make everything look nice.")))))},d=a(6),E=a.n(d),p=a(22),h=a(18),f=a(59),g=a(57),b=function(e){e.label;var t=Object(g.a)(e,["label"]),a=Object(p.c)(t),n=Object(f.a)(a,2),l=n[0],c=n[1];return r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",Object.assign({className:c.touched&&c.error?"input is-danger":"input"},l,t)),c.touched&&c.error?r.a.createElement("div",{className:"error has-text-danger"},c.error):null))},v=a(58),y=a.n(v),N=function(){return localStorage.getItem("token")},w=function(e){return localStorage.setItem("token",e)},S=function(){return localStorage.removeItem("token")},x=function(){var e=N();return y.a.create({baseURL:"http://localhost:5000/api",headers:{Authorization:e}})},O=N,R=a(37),T=function(e){return{type:"FETCH_SUCCESS",payload:e}},F=function(e){return{type:"FETCH_ERROR",payload:e}};var j=Object(i.b)(null,(function(e){return{login:function(t){return e(function(e){return function(t){var a,n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"FETCH_REQUEST"}),r.prev=1,r.next=4,E.a.awrap(y.a.post("".concat("http://localhost:5000/api","/login"),e));case 4:a=r.sent,n=a.data,w(n.payload),t({type:"TOGGLE_AUTH"}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),t(F(r.t0));case 13:case"end":return r.stop()}}),null,null,[[1,10]])}}(t))}}}))((function(e){var t=e.location,a=e.history,n=e.login;return O()?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(p.b,{initialValues:{username:"",password:""},validationSchema:h.object({username:h.string().required("Username is Required"),password:h.string().required("Password is Required").min(4,"Password must have at least 4 characters.")}),onSubmit:function(e,r){var l,c,o,i;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return l=r.setSubmitting,c=r.setErrors,o=r.setStatus,i=r.resetForm,s.prev=1,s.next=4,E.a.awrap(n(e));case 4:i({}),o({success:!0}),a.replace(t.state?t.state.from.pathname:"/"),s.next=14;break;case 9:s.prev=9,s.t0=s.catch(1),o({success:!1}),l(!1),c({submit:s.t0.message});case 14:case"end":return s.stop()}}),null,null,[[1,9]])}},r.a.createElement(p.a,{className:"card column is-two-fifths"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h1",{className:"title has-text-centered has-text-primary"},"Login"),r.a.createElement(b,{label:"Username",name:"username",type:"text",placeholder:"Username..."}),r.a.createElement(b,{label:"Password",name:"password",type:"password",placeholder:"Password..."}),r.a.createElement("button",{type:"submit",className:"button is-primary"},"Submit")))))}));var k=function(e){return r.a.createElement("div",null,r.a.createElement(j,e))},C=a(82);var _=Object(i.b)((function(e){return{loading:e.loading,friends:e.data,error:e.error}}),(function(e){return{getFriends:function(t){return e(function(e){return function(t){t({type:"FETCH_REQUEST"}),x().get(e?"/friends/".concat(e):"/friends").then((function(a){t(T(e?[a.data]:a.data)),console.log(a)})).catch((function(e){console.log("ERROR",e.message),t(F(e.message))}))}}(t))},fetchDelete:function(t){return e(function(e){return function(t,a){var n,r;return E.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E.a.awrap(t({type:"FETCH_REQUEST"}));case 2:return n=Object(R.a)(a().data),r=Object(R.a)(a().data).filter((function(t){return t.id!==e})),l.next=6,E.a.awrap(t(T(r)));case 6:return l.prev=6,l.next=9,E.a.awrap(x().delete("/friends/".concat(e)));case 9:l.next=15;break;case 11:return l.prev=11,l.t0=l.catch(6),l.next=15,E.a.awrap(t((c=n,o=l.t0.message,{type:"DELETE_ERROR",payload:{data:c,error:o}})));case 15:case"end":return l.stop()}var c,o}),null,null,[[6,11]])}}(t))}}}))((function(e){var t=e.getFriends,a=e.friends,l=e.match,c=e.loading,i=e.error,s=e.fetchDelete;return Object(n.useEffect)((function(){t(l.params.id)}),[t,l.params.id]),console.log("FRIENDS",a),console.log("LOADING",c),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"friends-header card-content"},r.a.createElement("h1",{className:"title is-3 has-text-primary",style:{marginBottom:0}},"Hello Friends..."),r.a.createElement(o.b,{to:"/addFriend"},r.a.createElement(C.Button,{className:"button is-primary"},"Add Friend")),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,i),r.a.createElement(o.b,{to:"/"},"Go Back Home")))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},c&&r.a.createElement("progress",{className:"progress is-small is-primary",max:"100"},"15%"),r.a.createElement(C.Table,{className:"table is-striped is-hoverable is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Age"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"More"))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.age),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/addFriend/".concat(e.id),className:"has-text-primary"},r.a.createElement("i",{title:"Update",className:"far fa-edit"}))," ","|"," ",r.a.createElement(o.b,{to:"#",className:"table-more-btn has-text-primary",onClick:function(){return s(e.id)}},r.a.createElement("i",{title:"Delete",className:"far fa-trash-alt"}))))}))))))))}));var U=Object(i.b)(null,(function(e){return{logout:function(){return e((function(e){e({type:"FETCH_REQUEST"});try{S(),e({type:"TOGGLE_AUTH"})}catch(t){e(F(t))}}))}}}))((function(e){return(0,e.logout)(),r.a.createElement("div",null,r.a.createElement(m.a,{to:"/"}))}));var I=function(e){e.path;var t=e.component,a=e.render,n=Object(g.a)(e,["path","component","render"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return console.log(e),O()?t?r.a.createElement(t,e):a(e):r.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var A=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"title is-2 has-text-danger"},"Page Not Found"),r.a.createElement(o.b,{to:"/",className:"button is-primary"},"Go Back Home"))};a(293);var H=Object(i.b)((function(e){return{friends:e.data}}),(function(e){return{addFriends:function(t){return e((a=t,function(e){e({type:"FETCH_REQUEST"}),x().post("/friends",a).then((function(e){console.log("ADD",e)})).catch((function(t){return e(F(t.message))}))}));var a},updateFriends:function(t,a){return e(function(e,t){return function(a){var n,r;return E.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E.a.awrap(a({type:"FETCH_REQUEST"}));case 2:return l.prev=2,l.next=5,E.a.awrap(x().put("/friends/".concat(e),t));case 5:n=l.sent,r=n.data,a(T(r)),l.next=14;break;case 10:return l.prev=10,l.t0=l.catch(2),l.next=14,E.a.awrap(a(F(l.t0.message)));case 14:case"end":return l.stop()}}),null,null,[[2,10]])}}(t,a))}}}))((function(e){var t=e.location,a=e.history,l=e.match,c=e.addFriends,o=e.friends,i=e.updateFriends,s=Object(n.useState)(l.params.id),u=Object(f.a)(s,1)[0];if(!O())return r.a.createElement(m.a,{to:"/"});var d=o.filter((function(e){return e.id===+u}));return r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(p.b,{initialValues:{id:d[0]?d[0].id:Date.now(),name:d[0]?d[0].name:"",age:d[0]?d[0].age:void 0,email:d[0]?d[0].email:""},validationSchema:h.object({name:h.string().required("Email is Required"),age:h.number().required("Age is Required").moreThan(.9999,"Age must be at least 1."),email:h.string().required("Email is Required.").email("Input valid email.").min(4,"Minimum 4 characters")}),onSubmit:function(e,n){var r=n.setSubmitting,l=n.setErrors,o=n.setStatus,s=n.resetForm;try{d[0]?i(d[0].id,e):c(e),s({}),o({success:!0}),a.replace(t.state?t.state.from.pathname:"/friends")}catch(m){o({success:!1}),r(!1),l({submit:m.message})}}},r.a.createElement(p.a,{className:"card column is-two-fifths"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h1",{className:"title has-text-centered has-text-primary"},u?"Update":"Submit"),r.a.createElement(b,{label:"Name",name:"name",type:"text",placeholder:"Name..."}),r.a.createElement(b,{label:"Age",name:"age",type:"text",placeholder:"Age..."}),r.a.createElement(b,{label:"Email",name:"email",type:"email",placeholder:"Email..."}),r.a.createElement("button",{type:"button",onClick:function(){return a.replace("/friends")},className:"button is-warning cancel-btn"},"Cancel"),r.a.createElement("button",{type:"submit",className:"button is-primary"},d[0]?"Update":"Submit")))))}));var D=function(e){return r.a.createElement("div",null,r.a.createElement(H,e))};var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement("div",{className:"container"},r.a.createElement(m.d,null,r.a.createElement(I,{path:"/addFriend/:id?",render:function(e){return r.a.createElement(D,e)}}),r.a.createElement(I,{path:"/friends/:id?",component:_}),r.a.createElement(I,{path:"/friends",component:_}),r.a.createElement(m.b,{path:"/login",render:function(e){return r.a.createElement(k,e)}}),r.a.createElement(m.b,{path:"/logout",component:U}),r.a.createElement(m.b,{path:"/not-found",component:A}),r.a.createElement(m.b,{path:"/",exact:!0,component:u}),r.a.createElement(m.a,{to:"/not-found"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(36),P=a(135),G=a(24),B={loading:!1,data:[],error:"",updating:{},loggedIn:!!N()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return Object(G.a)({},e,{loading:!0,error:""});case"FETCH_SUCCESS":return Object(G.a)({},e,{loading:!1,data:t.payload,loggedIn:!0});case"FETCH_ADD":return Object(G.a)({},e,{loading:!1,data:[].concat(Object(R.a)(e.data),[t.payload])});case"DELETE_ERROR":return Object(G.a)({},e,{loading:!1,data:Object(R.a)(t.payload.data),error:t.payload.error});case"FETCH_ERROR":return Object(G.a)({},e,{loading:!1,error:t.payload,loggedIn:!1});case"UPDATE_REQUEST":return Object(G.a)({},e,{updating:t.payload});case"TOGGLE_AUTH":return Object(G.a)({},e,{loggedIn:!e.loggedIn});default:return e}},V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.c,W=Object(q.d)(Q,V(Object(q.a)(P.a)));a(294);c.a.render(r.a.createElement(i.a,{store:W},r.a.createElement(o.a,null,r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[136,1,2]]]);
//# sourceMappingURL=main.5921bc7f.chunk.js.map